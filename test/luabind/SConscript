from BuildConfig import *


Import('testEnv')

luaTestEnv = testEnv.Clone()

pathToRoot = "../.."

setupEnv(luaTestEnv, pathToRoot)

outDir = join(getBuildPath(pathToRoot), testDir, "luabind")

sources = ["unittests.cpp"]
sources = sources + getSource("geom", pathToRoot)
sources = sources + getSource("util", pathToRoot)
sources = sources + getSource("lua", pathToRoot)

objects = []

for source in sources:
    source = str(source)
    name = (source.split("/")[-1]).split(".")[0]
    objects.append(luaTestEnv.Object(join(outDir, name), source))

luaTestEnv.Program(join(outDir,"suites"), objects)